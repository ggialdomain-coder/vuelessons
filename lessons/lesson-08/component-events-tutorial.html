<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building a Shopping Cart with Component Events - Step by Step</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            background: #f6f9fc;
        }
        .step {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .step h2 {
            color: #42b983;
            border-bottom: 2px solid #42b983;
            padding-bottom: 10px;
        }
        .explanation {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            border-left: 4px solid #42b983;
        }
        .code-block {
            background: #f0f0f0;
            color: #333;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            white-space: pre-wrap;
            font-family: 'Courier New', Courier, monospace;
            line-height: 1.6;
            word-wrap: break-word;
            border: 1px solid #ddd;
        }
        .demo-app {
            background: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            margin: 20px 0;
        }
        .tip {
            background: #fff3cd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
            margin: 15px 0;
        }
        .warning {
            background: #f8d7da;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #dc3545;
            margin: 15px 0;
        }
        code {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 3px;
            color: #d63384;
        }
        .card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 15px;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: inline-block;
            min-width: 250px;
            vertical-align: top;
        }
        .card h3 {
            color: #42b983;
            margin-top: 0;
        }
        .card button {
            background: #42b983;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }
        .card button:hover {
            background: #35a372;
        }
        .price {
            font-size: 1.5em;
            color: #42b983;
            font-weight: bold;
            margin: 10px 0;
        }
        .products-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin: 20px 0;
        }
        .cart {
            background: #fff3e0;
            padding: 20px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .cart-item {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 3px;
            display: flex;
            justify-content: space-between;
        }
        .cart-total {
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #ddd;
        }
    </style>
</head>
<body>
    <h1>üõí Building a Shopping Cart with Component Events - Step by Step Tutorial</h1>
    <p style="font-size: 1.1em; color: #666;">Learn how to build a shopping cart where ProductCard components emit events and the parent manages the cart! This tutorial will guide you through exactly what you need for the exercise.</p>

    <!-- STEP 1 -->
    <div class="step">
        <h2>Step 1: Understanding What We're Building</h2>
        <div class="explanation">
            <p><strong>Goal:</strong> Build a shopping cart where clicking "Add to Cart" on a product adds it to the cart and shows the total price.</p>
            <p><strong>What we need:</strong></p>
            <ul>
                <li>ProductCard component with props (name, price, description)</li>
                <li>"Add to Cart" button that emits an event</li>
                <li>Parent component that listens to events and manages cart</li>
                <li>Cart display showing items and total price</li>
            </ul>
        </div>
        
        <div class="explanation">
            <p><strong>Data Flow:</strong></p>
            <ul>
                <li>‚úÖ <strong>Props</strong> - Flow DOWN (parent ‚Üí child) - Pass product data to ProductCard</li>
                <li>‚úÖ <strong>Events</strong> - Flow UP (child ‚Üí parent) - ProductCard notifies parent when "Add to Cart" is clicked</li>
            </ul>
        </div>

        <div class="tip">
            <strong>üí° Remember:</strong> Props down, Events up! This is how Vue components communicate.
        </div>
    </div>

    <!-- STEP 2 -->
    <div class="step">
        <h2>Step 2: Set Up the Parent Component</h2>
        <div class="explanation">
            <p><strong>What we're doing:</strong> Create the main app with cart array and products array.</p>
            <p><strong>Key concept:</strong> The parent component manages the cart state.</p>
        </div>
        
        <div class="code-block">
const app = createApp({
    data() {
        return {
            cart: [],  // Will store added items
            products: [
                { id: 1, name: 'Vue.js Book', price: 29.99, description: 'Learn Vue.js!' },
                { id: 2, name: 'React Guide', price: 34.99, description: 'Master React' },
                { id: 3, name: 'Angular Tutorial', price: 39.99, description: 'Complete course' }
            ]
        }
    },
    methods: {
        // We'll add addToCart method here
    }
});
        </div>

        <div class="explanation">
            <p><strong>Explanation:</strong></p>
            <ul>
                <li><code>cart</code> - Array that will store products added to cart</li>
                <li><code>products</code> - Array of available products</li>
                <li>Parent component owns the cart data</li>
            </ul>
        </div>
    </div>

    <!-- STEP 3 -->
    <div class="step">
        <h2>Step 3: Create ProductCard Component with Props</h2>
        <div class="explanation">
            <p><strong>What we're doing:</strong> Create the ProductCard component that accepts props (from Lesson 7).</p>
            <p><strong>Key concept:</strong> Component receives product data via props.</p>
        </div>
        
        <div class="code-block">
app.component('ProductCard', {
    props: ['name', 'price', 'description'],
    template: `
        &lt;div class="card"&gt;
            &lt;h3&gt;{{ name }}&lt;/h3&gt;
            &lt;p class="price"&gt;${{ price.toFixed(2) }}&lt;/p&gt;
            &lt;p&gt;{{ description }}&lt;/p&gt;
            &lt;button @click="addToCart"&gt;Add to Cart&lt;/button&gt;
        &lt;/div&gt;
    `,
    methods: {
        // We'll add addToCart method here next
    }
});
        </div>

        <div class="explanation">
            <p><strong>Explanation:</strong></p>
            <ul>
                <li>Component accepts <code>name</code>, <code>price</code>, and <code>description</code> as props</li>
                <li>Displays product information</li>
                <li>Has "Add to Cart" button (we'll make it work in next step)</li>
            </ul>
        </div>
    </div>

    <!-- STEP 4 -->
    <div class="step">
        <h2>Step 4: Emit Event from ProductCard</h2>
        <div class="explanation">
            <p><strong>What we're doing:</strong> Make the "Add to Cart" button emit an event with product data.</p>
            <p><strong>Key concept:</strong> Use <code>this.$emit('event-name', data)</code> to send data to parent.</p>
        </div>
        
        <div class="code-block">
app.component('ProductCard', {
    props: ['name', 'price', 'description'],
    template: `
        &lt;div class="card"&gt;
            &lt;h3&gt;{{ name }}&lt;/h3&gt;
            &lt;p class="price"&gt;${{ price.toFixed(2) }}&lt;/p&gt;
            &lt;p&gt;{{ description }}&lt;/p&gt;
            &lt;button @click="addToCart"&gt;Add to Cart&lt;/button&gt;
        &lt;/div&gt;
    `,
    methods: {
        addToCart() {
            // Emit event to parent with product data
            this.$emit('add-to-cart', {
                name: this.name,
                price: this.price,
                description: this.description
            });
        }
    }
});
        </div>

        <div class="explanation">
            <p><strong>Explanation:</strong></p>
            <ul>
                <li><code>this.$emit('add-to-cart', data)</code> - Emits event named 'add-to-cart'</li>
                <li>First parameter: event name (use kebab-case: 'add-to-cart')</li>
                <li>Second parameter: product data object to pass to parent</li>
                <li>Parent will receive this data in the event handler</li>
            </ul>
        </div>

        <div class="warning">
            <strong>‚ö†Ô∏è Important:</strong> Event names should be in <strong>kebab-case</strong> (lowercase with hyphens), not camelCase!
        </div>
    </div>

    <!-- STEP 5 -->
    <div class="step">
        <h2>Step 5: Listen to Event in Parent</h2>
        <div class="explanation">
            <p><strong>What we're doing:</strong> Make the parent listen to the 'add-to-cart' event and handle it.</p>
            <p><strong>Key concept:</strong> Use <code>@add-to-cart="addToCart"</code> to listen, and create handler method.</p>
        </div>
        
        <div class="code-block">
// In parent template
&lt;product-card 
    v-for="product in products" 
    :key="product.id"
    :name="product.name" 
    :price="product.price" 
    :description="product.description"
    @add-to-cart="addToCart"&gt;
&lt;/product-card&gt;

// In parent methods
methods: {
    addToCart(product) {
        // product is the data passed from child component
        this.cart.push(product);
    }
}
        </div>

        <div class="explanation">
            <p><strong>Explanation:</strong></p>
            <ul>
                <li><code>@add-to-cart="addToCart"</code> - Listens to 'add-to-cart' event</li>
                <li><code>@</code> is shorthand for <code>v-on:</code></li>
                <li><code>addToCart(product)</code> - Handler receives product data from child</li>
                <li><code>this.cart.push(product)</code> - Adds product to cart array</li>
            </ul>
        </div>
    </div>

    <!-- STEP 6 -->
    <div class="step">
        <h2>Step 6: Display Cart Items</h2>
        <div class="explanation">
            <p><strong>What we're doing:</strong> Display the cart items using v-for.</p>
            <p><strong>Key concept:</strong> Loop through cart array and display each item.</p>
        </div>
        
        <div class="code-block">
&lt;div class="cart"&gt;
    &lt;h3&gt;Shopping Cart ({{ cart.length }} items)&lt;/h3&gt;
    
    &lt;div v-if="cart.length === 0" style="color: #999;"&gt;
        Cart is empty. Add some products!
    &lt;/div&gt;
    
    &lt;div v-for="(item, index) in cart" :key="index" class="cart-item"&gt;
        {{ item.name }} - ${{ item.price.toFixed(2) }}
    &lt;/div&gt;
&lt;/div&gt;
        </div>

        <div class="explanation">
            <p><strong>Explanation:</strong></p>
            <ul>
                <li><code>v-if="cart.length === 0"</code> - Shows message when cart is empty</li>
                <li><code>v-for="(item, index) in cart"</code> - Loops through cart items</li>
                <li><code>:key="index"</code> - Required for v-for</li>
                <li>Displays item name and formatted price</li>
            </ul>
        </div>
    </div>

    <!-- STEP 7 -->
    <div class="step">
        <h2>Step 7: Calculate Total Price</h2>
        <div class="explanation">
            <p><strong>What we're doing:</strong> Use a computed property to calculate the total price of all items in cart.</p>
            <p><strong>Key concept:</strong> Computed properties automatically recalculate when cart changes.</p>
        </div>
        
        <div class="code-block">
computed: {
    totalPrice() {
        return this.cart.reduce((sum, item) => sum + item.price, 0);
    }
}

// In template
&lt;div class="cart-total" v-if="cart.length > 0"&gt;
    Total: ${{ totalPrice.toFixed(2) }}
&lt;/div&gt;
        </div>

        <div class="explanation">
            <p><strong>Explanation:</strong></p>
            <ul>
                <li><code>reduce()</code> - Sums up all prices in cart array</li>
                <li><code>(sum, item) => sum + item.price</code> - Adds each item's price to sum</li>
                <li><code>0</code> - Starting value (initial sum)</li>
                <li><code>totalPrice.toFixed(2)</code> - Formats to 2 decimal places</li>
                <li>Computed property automatically updates when cart changes!</li>
            </ul>
        </div>
    </div>

    <!-- STEP 8 -->
    <div class="step">
        <h2>Step 8: Complete Working Code</h2>
        <p>Here's the complete code for the shopping cart:</p>
        
        <div class="code-block">
&lt;script src="https://unpkg.com/vue@3/dist/vue.global.js"&gt;&lt;/script&gt;

&lt;script&gt;
    const { createApp } = Vue;
    
    const app = createApp({
        data() {
            return {
                cart: [],
                products: [
                    { id: 1, name: 'Vue.js Book', price: 29.99, description: 'Learn Vue.js!' },
                    { id: 2, name: 'React Guide', price: 34.99, description: 'Master React' },
                    { id: 3, name: 'Angular Tutorial', price: 39.99, description: 'Complete course' }
                ]
            }
        },
        computed: {
            totalPrice() {
                return this.cart.reduce((sum, item) => sum + item.price, 0);
            }
        },
        methods: {
            addToCart(product) {
                this.cart.push(product);
            }
        }
    });
    
    app.component('ProductCard', {
        props: ['name', 'price', 'description'],
        template: `
            &lt;div class="card"&gt;
                &lt;h3&gt;{{ name }}&lt;/h3&gt;
                &lt;p class="price"&gt;${{ price.toFixed(2) }}&lt;/p&gt;
                &lt;p&gt;{{ description }}&lt;/p&gt;
                &lt;button @click="addToCart"&gt;Add to Cart&lt;/button&gt;
            &lt;/div&gt;
        `,
        methods: {
            addToCart() {
                this.$emit('add-to-cart', {
                    name: this.name,
                    price: this.price,
                    description: this.description
                });
            }
        }
    });
    
    app.mount('#app');
&lt;/script&gt;

&lt;!-- HTML --&gt;
&lt;div id="app"&gt;
    &lt;h2&gt;Our Products&lt;/h2&gt;
    
    &lt;div class="cart"&gt;
        &lt;h3&gt;Shopping Cart ({{ cart.length }} items)&lt;/h3&gt;
        &lt;div v-if="cart.length === 0"&gt;Cart is empty. Add some products!&lt;/div&gt;
        &lt;div v-for="(item, index) in cart" :key="index" class="cart-item"&gt;
            {{ item.name }} - ${{ item.price.toFixed(2) }}
        &lt;/div&gt;
        &lt;div class="cart-total" v-if="cart.length > 0"&gt;
            Total: ${{ totalPrice.toFixed(2) }}
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class="products-container"&gt;
        &lt;product-card 
            v-for="product in products" 
            :key="product.id"
            :name="product.name" 
            :price="product.price" 
            :description="product.description"
            @add-to-cart="addToCart"&gt;
        &lt;/product-card&gt;
    &lt;/div&gt;
&lt;/div&gt;
        </div>
    </div>

    <!-- DEMO -->
    <div class="step">
        <h2>Live Demo: Complete Shopping Cart</h2>
        <div class="demo-app">
            <h3>Try it out:</h3>
            <div id="demo">
                <h2 style="color: #42b983; text-align: center;">Our Products</h2>
                
                <div class="cart">
                    <h3>Shopping Cart ({{ cart.length }} items)</h3>
                    <div v-if="cart.length === 0" style="color: #999; padding: 10px;">
                        Cart is empty. Add some products!
                    </div>
                    <div v-for="(item, index) in cart" :key="index" class="cart-item">
                        {{ item.name }} - ${{ item.price.toFixed(2) }}
                    </div>
                    <div class="cart-total" v-if="cart.length > 0">
                        Total: ${{ totalPrice.toFixed(2) }}
                    </div>
                </div>
                
                <div class="products-container">
                    <product-card 
                        v-for="product in products" 
                        :key="product.id"
                        :name="product.name" 
                        :price="product.price" 
                        :description="product.description"
                        @add-to-cart="addToCart">
                    </product-card>
                </div>
            </div>
        </div>
    </div>

    <!-- KEY CONCEPTS -->
    <div class="step">
        <h2>üéì Key Concepts You Learned</h2>
        <div class="explanation">
            <h3>Emitting Events:</h3>
            <ul>
                <li>‚úÖ <code>this.$emit('event-name', data)</code> - Emit event from child component</li>
                <li>‚úÖ First parameter: event name (kebab-case: 'add-to-cart')</li>
                <li>‚úÖ Second parameter: data to pass to parent</li>
            </ul>
            
            <h3>Listening to Events:</h3>
            <ul>
                <li>‚úÖ <code>@add-to-cart="addToCart"</code> - Listen in parent template</li>
                <li>‚úÖ Handler receives data as first parameter</li>
                <li>‚úÖ Parent updates its own data (cart array)</li>
            </ul>
            
            <h3>Complete Flow:</h3>
            <ul>
                <li>1. User clicks "Add to Cart" button</li>
                <li>2. ProductCard emits 'add-to-cart' event with product data</li>
                <li>3. Parent listens to event and calls addToCart(product)</li>
                <li>4. Parent adds product to cart array</li>
                <li>5. Cart display updates automatically (reactive!)</li>
                <li>6. Total price recalculates automatically (computed property!)</li>
            </ul>
        </div>

        <div class="tip">
            <strong>üí° Ready for the Exercise?</strong> You now have everything you need! Go to the exercise page and build your shopping cart. Remember:
            <ol>
                <li>Create ProductCard component with props</li>
                <li>Emit event when "Add to Cart" is clicked</li>
                <li>Listen to event in parent and add to cart</li>
                <li>Display cart items with v-for</li>
                <li>Calculate total with computed property</li>
            </ol>
        </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
        (function() {
            // Wait for both DOM and Vue to be ready
            function initDemo() {
                if (typeof Vue === 'undefined') {
                    setTimeout(initDemo, 100);
                    return;
                }
                
                const demoEl = document.getElementById('demo');
                if (!demoEl) {
                    setTimeout(initDemo, 100);
                    return;
                }
                
                const { createApp } = Vue;
                
                // Demo: Complete shopping cart
                const app = createApp({
                    data() {
                        return {
                            cart: [],
                            products: [
                                { id: 1, name: 'Vue.js Book', price: 29.99, description: 'Learn Vue.js the easy way!' },
                                { id: 2, name: 'React Guide', price: 34.99, description: 'Master React development' },
                                { id: 3, name: 'Angular Tutorial', price: 39.99, description: 'Complete Angular course' }
                            ]
                        }
                    },
                    computed: {
                        totalPrice() {
                            return this.cart.reduce((sum, item) => sum + item.price, 0);
                        }
                    },
                    methods: {
                        addToCart(product) {
                            this.cart.push(product);
                        }
                    }
                });
                
                app.component('ProductCard', {
                    props: ['name', 'price', 'description'],
                    template: `
                        <div class="card">
                            <h3>{{ name }}</h3>
                            <p class="price">\${{ price.toFixed(2) }}</p>
                            <p>{{ description }}</p>
                            <button @click="addToCart">Add to Cart</button>
                        </div>
                    `,
                    methods: {
                        addToCart() {
                            this.$emit('add-to-cart', {
                                name: this.name,
                                price: this.price,
                                description: this.description
                            });
                        }
                    }
                });
                
                app.mount('#demo');
            }
            
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initDemo);
            } else {
                initDemo();
            }
        })();
    </script>
</body>
</html>
