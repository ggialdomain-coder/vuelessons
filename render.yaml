# Render Blueprint - Deploys Django backend for ShopVue ecommerce
# Deploy: Connect this repo at render.com → New → Blueprint
# Or: New Web Service → Connect repo → set Root Directory: ecommerce/backend

services:
  - type: web
    name: shopvue-api
    runtime: python
    plan: free

    # Root directory for the Django project
    rootDir: ecommerce/backend

    buildCommand: |
      pip install -r requirements.txt
      python manage.py collectstatic --noinput

    startCommand: |
      python manage.py migrate
      python manage.py create_sample_data 2>/dev/null || true
      python manage.py create_default_admin 2>/dev/null || true
      gunicorn shopvue.wsgi:application

    envVars:
      - key: PYTHON_VERSION
        value: "3.12.0"
      - key: SECRET_KEY
        generateValue: true
      - key: DEBUG
        value: "false"
      - key: ALLOWED_HOSTS
        value: ".onrender.com,.netlify.app,localhost,127.0.0.1"
